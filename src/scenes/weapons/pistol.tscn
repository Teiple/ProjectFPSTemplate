[gd_scene load_steps=9 format=2]

[ext_resource path="res://src/scenes/weapon_models/pistol_model.tscn" type="PackedScene" id=1]
[ext_resource path="res://src/scripts/weapon.gd" type="Script" id=2]
[ext_resource path="res://src/resources/weapon/pistol_weapon_stats.tres" type="Resource" id=3]
[ext_resource path="res://src/resources/weapon/pistol_state_machine.tres" type="AnimationNodeStateMachine" id=4]
[ext_resource path="res://src/scenes/effects/muzzle_flash_1.tscn" type="PackedScene" id=5]
[ext_resource path="res://assets/materials/pistol_view.tres" type="Material" id=6]

[sub_resource type="AnimationNodeStateMachinePlayback" id=1]

[sub_resource type="SphereShape" id=2]
radius = 0.05

[node name="Pistol" type="Spatial"]
script = ExtResource( 2 )
weapon_stats = ExtResource( 3 )

[node name="PistolModel" parent="." instance=ExtResource( 1 )]
transform = Transform( -1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0 )

[node name="pistol_mesh_with_animations" parent="PistolModel/pistol/pistol_rig_with_animations/Skeleton" index="0"]
material_override = ExtResource( 6 )

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = ExtResource( 4 )
anim_player = NodePath("../PistolModel/pistol/AnimationPlayer")
active = true
parameters/playback = SubResource( 1 )

[node name="MuzzlePosition" type="Spatial" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0427224, -0.126019 )

[node name="MuzzleFlash1" parent="MuzzlePosition" instance=ExtResource( 5 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.0250258 )
trigger_node_path = NodePath("../..")
signal_name = "fired"

[node name="MuzzleSpaceCheck" type="ShapeCast" parent="MuzzlePosition"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.00906901, 0.010107 )
enabled = false
shape = SubResource( 2 )
target_position = Vector3( 0, 0, 0 )
max_results = 1
collision_mask = 0

[editable path="PistolModel"]
[editable path="PistolModel/pistol"]
